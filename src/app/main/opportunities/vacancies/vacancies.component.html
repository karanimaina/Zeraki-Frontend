<section class="content mt-config">
    <div *ngIf="!addVacancy" class="row">
        <div class="col-12">
            <div class="mb-10">
                <button class="dropdown-toggle btn btn-sm btn-secondary px-10" data-bs-toggle="dropdown">{{selectedFilter}}</button>
                <div class="dropdown-menu dropdown-menu-start bg-active">
                    <a (click)="changeFilter('staff')" *ngIf="selectedFilter == 'Teaching staff'" class="dropdown-item" href="#">
                      {{ 'opportunities.vacancies.nonTeachingStaffBtn' | translate }}
                    </a>
                    <a (click)="changeFilter('teaching')" *ngIf="selectedFilter == 'Non-teaching staff'" class="dropdown-item" href="#">
                      {{ 'opportunities.vacancies.teachingStaffBtn' | translate }}
                    </a>
                </div>
                <button *ngIf="(userRoles$ | async)?.isSchoolAdmin" class="btn btn-sm btn-dark waves-effect waves-light pull-right " type="button" (click)="newVacancy()">
                    <i>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                            <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                        </svg>
                    </i>
                    {{ 'opportunities.vacancies.addBtn' | translate }}
                </button>
            </div>
            <div class="box">
                <div class="box-header with-border">
                    <h4 class="box-title">{{ 'opportunities.vacancies.title' | translate }}</h4>
                    <div class="box-controls pull-right">
                        <div class="box-header-actions">
                            <div class="lookup lookup-sm lookup-right mx-20">
                                <input matInput (keyup.enter)="applyFilter($event)" type="search" name="s" [placeholder]="'opportunities.vacancies.searchPlaceholderText' | translate" class="bg-secondary-light" #input>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- <div *ngIf="teacherListError">
            <div class="box div box-body">
                <p class="mb-0">We couldn't find any vacancies</p>
            </div>
        </div> -->
        <div class="col-12">
            <div class="box">
                <div *ngIf="dataSource?.filteredData.length > 0" class="box-body">
                    <div class="table-responsive">
                      <table class="table table-sm table-striped table-bordered">
                            <thead>
                                <tr>
                                <th scope="col">#</th>
                                <th scope="col" class="text-uppercase">
                                  {{ 'opportunities.vacancies.tableHeaders.title' | translate }}
                                </th>
                                <th *ngIf="vacancyType == 1" scope="col" class="text-uppercase">
                                  {{ 'opportunities.vacancies.tableHeaders.subjectCombination' | translate }}
                                </th>
                                <th scope="col" class="text-uppercase">
                                  {{ 'opportunities.vacancies.tableHeaders.school' | translate }}
                                </th>
                                <th scope="col" class="text-uppercase">
                                  {{ 'opportunities.vacancies.tableHeaders.postedBy' | translate }}
                                </th>
                                <th scope="col" class="text-uppercase">
                                  {{ 'opportunities.vacancies.tableHeaders.datePosted' | translate }}
                                </th>
                                <th scope="col" class="text-uppercase" class="text-center" style="width: 22%">
                                  {{ 'opportunities.vacancies.tableHeaders.actions' | translate }}
                                </th>
                                <!-- <th scope="col" *ngIf="userRoles.isSchoolAdmin" colspan="3" class="text-center">Actions</th> -->
                                <!-- <th scope="col" *ngIf="!userRoles.isSchoolAdmin"  class="text-center">Actions</th> -->
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let t of dataSource?.filteredData; first as isFirst;index as i">
                                    <th scope="row">{{ i+1 }}</th>
                                    <td>{{ t?.title }}</td>
                                    <td *ngIf="vacancyType == 1">{{ t?.subject1 }}/{{ t?.subject2 }}</td>
                                    <!-- <td>
                                        <span *ngIf="t.showPhone == true"> {{ t?.phoneNumber }}</span>
                                    </td> -->
                                    <td>
                                        <span class="text-dark fw-600 fs-16">{{t.school}}</span>
                                        <span class="text-fade d-block">{{ t?.subCounty }}, {{ t?.county }}</span>
                                    </td>
                                    <td>
                                        <span class="text-dark fw-600 fs-16">{{ t.postedBy }}</span>
                                        <span *ngIf="t.showPhone == true" class="text-fade d-block">{{ t?.phoneNumber }}</span>
                                    </td>
                                    <td>{{ t.postedOn | date }}</td>
                                    <td class="text-center">
                                        <button type="button" data-bs-toggle="modal" data-bs-target="#view-vacancy" (click)="vacancy=t" class="waves-effect waves-light btn btn-secondary btn-sm mx-1">
                                            <i>
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
                                                    <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
                                                    <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
                                                </svg>
                                            </i>
                                            <span class="ms-1">{{ 'opportunities.vacancies.vacancy.viewBtn' | translate }}</span>
                                        </button>
                                        <button *ngIf="t.canEdit" (click)="editVacancy(t)" type="button" class="waves-effect waves-light btn btn-secondary btn-sm mx-1">
                                            <i>
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pen" viewBox="0 0 16 16">
                                                    <path d="m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001zm-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708l-1.585-1.585z"/>
                                                </svg>
                                            </i>
                                            <span class="ms-1">{{ 'opportunities.vacancies.vacancy.editBtn' | translate }}</span>
                                        </button>
                                        <button *ngIf="t.canEdit" type="button" class="waves-effect waves-light btn btn-danger btn-sm mx-1" (click)="deleteVacancy(t)">
                                            <i>
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                                    <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
                                                    <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
                                                </svg>
                                            </i>
                                            <span class="ms-1">{{ 'opportunities.vacancies.vacancy.deleteBtn' | translate }}</span>
                                        </button>
                                    </td>
                                    <!-- <td *ngIf="t.canEdit" class="text-center">
                                        <button (click)="editVacancy(t)" type="button" class="waves-effect waves-light btn btn-secondary btn-sm">
                                            <i>
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pen" viewBox="0 0 16 16">
                                                    <path d="m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001zm-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708l-1.585-1.585z"/>
                                                </svg>
                                            </i>
                                            <span class="ms-1">Edit</span>
                                        </button>
                                    </td>
                                    <td *ngIf="t.canEdit" class="text-center">
                                        <button type="button" class="waves-effect waves-light btn btn-danger btn-sm" (click)="deleteVacancy(t)">
                                            <i>
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                                    <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
                                                    <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
                                                </svg>
                                            </i>
                                            <span class="ms-1">Delete</span>
                                        </button>
                                    </td> -->
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <span *ngIf="vacancyObj?.totalPages > 0">
                        <ul class="pagination pagination-sm pull-right mb-0">
                          <li class="page-item text-sm mt-1 me-2">
                            {{ 'opportunities.vacancies.paginationInfo' | translate:{currentPage: vacancyObj.currentPage, totalPages: vacancyObj.totalPages} }}
                          </li>
                          <li class="page-item" [ngClass]="{'disabled': vacancyObj?.currentPage == 1}">
                            <a (click)="previousPage()" class="page-link" aria-label="Previous">
                              <span aria-hidden="true">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left-short" viewBox="0 0 16 16">
                                  <path fill-rule="evenodd" d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"/>
                                </svg>
                              </span>
                            </a>
                          </li>
                          <!-- <li class="page-item"><a class="page-link" href="#">1</a></li> -->
                          <li class="page-item" [ngClass]="{'disabled': vacancyObj?.currentPage == vacancyObj?.totalPages}">
                            <a (click)="nextPage()" class="page-link" aria-label="Next">
                              <span aria-hidden="true">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16">
                                  <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"/>
                                </svg>
                              </span>
                            </a>
                          </li>
                        </ul>
                    </span>
                </div>
                <div *ngIf="dataSource?.filteredData.length == 0" class="box-body text-center">
                    <h4>{{ 'opportunities.vacancies.emptyList' | translate }}</h4>
                </div>
                <!-- <div class="box-footer pb-0">

                </div> -->
            </div>
        </div>
    </div>
    <div *ngIf="addVacancy" class="row">
        <!-- <button mat-raised-button (click)="isLinear = !isLinear" id="toggle-linear">
            {{!isLinear ? 'Enable linear mode' : 'Disable linear mode'}}
        </button> -->
        <mat-stepper orientation="vertical" [linear]="isLinear" #stepper>
            <mat-step [stepControl]="vForm.control">
              <form #vForm="ngForm">
                <ng-template matStepLabel>{{ 'opportunities.vacancies.addVacancy.vacancy.headerText' | translate }}: <span class="text-info">{{selected_type}}</span></ng-template>
                <div class="row mt-10">
                    <div class="col-lg-4 col-sm-4">
                        <input (click)="toggleRecipient('teaching')" type="radio" id="teacher_radio" class="with-gap radio-col-info" name="teacher_radio" [checked]="teacher_option" required/>
                        <label for="teacher_radio">{{ 'opportunities.vacancies.addVacancy.vacancy.teachingStaffOption' | translate }}</label>
                    </div>
                    <div class="col-lg-4 col-sm-4">
                        <input matStepperNext (click)="toggleRecipient('nonTeaching')" type="radio" id="staff_radio" class="with-gap radio-col-info" name="staff_radio" [checked]="staff_option" />
                        <label for="staff_radio">{{ 'opportunities.vacancies.addVacancy.vacancy.nonTeachingStaffOption' | translate }}</label>
                    </div>
                </div>
                <div class="mt-10">
                    <button matStepperNext type="submit" class="btn btn-sm btn-info">
                        {{ 'opportunities.vacancies.addVacancy.vacancy.nextBtn' | translate }}
                        <!-- <span *ngIf="getting_data"><img src="../../../../assets/img/loading-bars.svg" alt="Loading-bars"></span> -->
                    </button>
                </div>
              </form>
            </mat-step>
            <mat-step [stepControl]="vForm2.control" errorMessage="Missing required fields.">
              <form #vForm2="ngForm">
                <ng-template matStepLabel>{{ 'opportunities.vacancies.addVacancy.details.headerText' | translate }}</ng-template>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">{{ 'opportunities.vacancies.addVacancy.details.form.title' | translate }}<span class="text-danger">*</span></label>
                            <input type="text" class="form-control" [placeholder]="'opportunities.vacancies.addVacancy.details.form.titlePlaceholderText' | translate"
                                name="vTitle" #vTitle="ngModel" [(ngModel)]="vacancy.title" required
                                [ngClass]="{ 'b-1 && border-danger': vForm2.submitted && vTitle.invalid }">
                            <div *ngIf="vForm2.submitted && vTitle.errors?.required" class="form-control-feedback text-danger">
                                <small>{{ 'opportunities.vacancies.addVacancy.details.formErrors.title' | translate }}.</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">{{ 'opportunities.vacancies.addVacancy.details.form.deadlineDate' | translate }}:<span class="text-danger">*</span></label>
                            <small class="sidetitle">{{ 'opportunities.vacancies.addVacancy.details.form.deadlineDateHelperText' | translate }}</small>
                            <div>
                                <input class="form-control" type="date" [min]="today" name="vApplyBy" #vApplyBy="ngModel" [(ngModel)]="vacancy.applyByDate" required
                                [ngClass]="{ 'b-1 && border-danger': vForm2.submitted && vApplyBy.invalid }">
                            </div>
                            <div *ngIf="vForm2.submitted && vApplyBy.errors?.required" class="form-control-feedback text-danger">
                                <small>{{ 'opportunities.vacancies.addVacancy.details.formErrors.deadlineDate' | translate }}.</small>
                            </div>
                            <!-- <input type="text" class="form-control"
                                name="vApplyBy" #vApplyBy="ngModel" [(ngModel)]="vacancy.applyByDate" required
                                [ngClass]="{ 'b-1 && border-danger': vForm2.submitted && vApplyBy.invalid }">
                            <div *ngIf="vForm2.submitted && vApplyBy.errors?.required" class="form-control-feedback text-danger">
                                <small>{{ 'opportunities.vacancies.addVacancy.details.formErrors.deadlineDate' | translate }}.</small>
                            </div> -->
                        </div>
                    </div>
                    <div class="row mt-10">
                        <label class="fw-500">{{ 'opportunities.vacancies.addVacancy.details.form.description.headerText' | translate }}<span class="text-danger">*</span></label>
                        <div class="col-lg-4 col-sm-4" *ngIf="!isEdit" >
                            <input (click)="toggleContentType(2)" type="radio" id="text_radio" class="with-gap radio-col-info" name="text_radio" [checked]="text_option" required/>
                            <label for="text_radio">
                              {{ 'opportunities.vacancies.addVacancy.details.form.description.textOption' | translate }}
                            </label>
                        </div>
                        <div class="col-lg-4 col-sm-4" *ngIf="!isEdit" >
                            <input (click)="toggleContentType(1)" type="radio" id="file_radio" class="with-gap radio-col-info" name="file_radio" [checked]="file_option"/>
                            <label for="file_radio">
                              {{ 'opportunities.vacancies.addVacancy.details.form.description.fileOption' | translate }}
                            </label>
                        </div>
                    </div>
                    <div class="col-md-12 mt-10">
                        <div *ngIf="file_option && !isEdit" class="form-group">
                            <!-- <label for="formFile" class="form-label">Choose File <span class="text-danger">*</span></label> -->
                            <input class="form-control" type="file" accept="application/pdf" id="formFile" required data-validation-required-message="This field is required"
                              name="sFormUp" #sFormUp="ngModel" [(ngModel)]="file_input" (change)="detectFiles($event)" required
                              [ngClass]="{ 'b-1 && border-danger': vForm2.submitted && sFormUp.invalid }">
                                <div *ngIf="vForm2.submitted && sFormUp.errors?.required" class="form-control-feedback text-danger">
                                    <small>{{ 'opportunities.vacancies.addVacancy.details.formErrors.description.fileOption' | translate }}.</small>
                                </div>
                            <div class="form-control-feedback"><small>{{ 'opportunities.vacancies.addVacancy.details.form.description.fileOptionHelperText' | translate }}</small></div>
                        </div>
                        <div *ngIf="file_option && editUpload" class="form-group">
                            <!-- <label for="formFile" class="form-label">Choose File <span class="text-danger">*</span></label> -->
                            <input class="form-control" type="file" accept="application/pdf" id="formFile" required data-validation-required-message="This field is required"
                              name="sFormUp" #sFormUp="ngModel" [(ngModel)]="file_input" (change)="detectFiles($event)" required
                              [ngClass]="{ 'b-1 && border-danger': vForm2.submitted && sFormUp.invalid }">
                                <div *ngIf="vForm2.submitted && sFormUp.errors?.required" class="form-control-feedback text-danger">
                                    <small>{{ 'opportunities.vacancies.addVacancy.details.formErrors.description.fileOption' | translate }}.</small>
                                </div>
                            <div class="form-control-feedback">
                                <small>{{ 'opportunities.vacancies.addVacancy.details.form.description.fileOptionHelperText' | translate }}</small>
                                <small class="pull-right">
                                    <a (click)="editUpload = false;" class="text-info" style="cursor: pointer;">
                                        <i>
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left-short" viewBox="0 0 16 16">
                                                <path fill-rule="evenodd" d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"/>
                                            </svg>
                                        </i>
                                        {{ 'opportunities.vacancies.addVacancy.details.form.description.cancelBtn' | translate }}
                                    </a>
                                </small>
                            </div>
                        </div>
                        <div *ngIf="file_option && isEdit && !editUpload" class="form-group">
                            <!-- <label for="formFile" class="form-label">Choose File <span class="text-danger">*</span></label> -->
                            <span>
                                <a (click)="downloadFile(vacancy.description, vacancy.title)" class="text-info" style="cursor: pointer;">
                                    {{ 'opportunities.vacancies.addVacancy.details.form.description.downloadBtn' | translate }}
                                    <i>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
                                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                                            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                                        </svg>
                                    </i>
                                </a><span class="ms-2">file to view description</span> or
                                <a (click)="editUpload = true"class="text-info" style="cursor: pointer;">
                                    {{ 'opportunities.vacancies.addVacancy.details.form.description.reuploadBtn' | translate }}
                                    <i>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
                                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                                            <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
                                        </svg>
                                    </i>
                                </a><span class="ms-2">{{ 'opportunities.vacancies.addVacancy.details.form.description.toEditText' | translate }}.</span>
                            </span>
                        </div>
                        <div *ngIf="text_option" class="form-group">
                            <!-- <label class="form-label">Description<span class="text-danger">*</span></label> -->
                            <textarea class="form-control" placeholder="Add description..."
                                name="vDesc" #vDesc="ngModel" [(ngModel)]="vacancy.description" rows="3"
                                [ngClass]="{ 'b-1 && border-danger': vForm2.submitted && vDesc.invalid }" required></textarea>
                            <div *ngIf="vForm2.submitted && vDesc.errors?.required" class="form-control-feedback text-danger">
                                <small>{{ 'opportunities.vacancies.addVacancy.details.formErrors.description.description' | translate }}.</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div *ngIf="teacher_option" class="row mt-10">
                    <h5 class="fw-bold">{{ 'opportunities.vacancies.addVacancy.details.subjectCombinations.headerText' | translate }}: </h5>
                    <span><h6 *ngIf="counter == 2" class="text-danger">
                      {{ 'opportunities.vacancies.addVacancy.details.subjectCombinationsErrors.maximumSubjects' | translate }}
                    </h6></span>
                        <!-- categories section -->
                        <div class="col-sm-4">
                            <div class="form-group" *ngFor="let c of categories">
                                <label class="form-label">{{c.name}}</label>
                                <div *ngFor="let s of c.subjects">
                                    <div>
                                        <input type="checkbox" id="{{s.textCode}}" class="filled-in chk-col-info"
                                            (change)="setSelectValue(s)"
                                            [checked]="(vacancy.subject1 == s?.name || vacancy.subject2 == s?.name)"
                                            [disabled]="!s.selected && counter == 2">
                                        <label for="{{s.textCode}}">{{s.name}} </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- technical categories section -->
                        <div class="col-sm-4">
                            <div class="form-group" *ngFor="let c of categories_technicals">
                                <label class="form-label">{{c.name}}</label>
                                <div *ngFor="let s of c.subjects">
                                    <div>
                                        <input type="checkbox" id="{{s.textCode}}" class="filled-in chk-col-info"
                                            [checked]="(vacancy.subject1 == s?.name || vacancy.subject2 == s?.name)"
                                            (change)="setSelectValue(s)"
                                            [disabled]="!s.selected && counter == 2">
                                        <label for="{{s.textCode}}">{{s.name}} </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- optional categories section -->
                        <div class="col-sm-4">
                            <div class="form-group" *ngFor="let c of categories_optionals;">
                                <label class="form-label">{{c.name}}</label>
                                <div *ngFor="let s of c.subjects">
                                    <div>
                                        <input type="checkbox" [id]="s.textCode" class="filled-in chk-col-info"
                                            (change)="setSelectValue(s)"
                                            [checked]="(vacancy.subject1 == s?.name || vacancy.subject2 == s?.name)"
                                            [disabled]="!s.selected && counter == 2">
                                        <label [for]="s.textCode">{{s.name}} </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                </div>
                <div class="box-footer d-flex justify-content-between justify-content-lg-start">
                    <div>
                        <button matStepperPrevious type="submit" class="btn btn-sm btn-secondary me-lg-20">
                            {{ 'opportunities.vacancies.addVacancy.details.subjectCombinations.backBtn' | translate }}
                        </button>
                    </div>
                    <div>
                        <button matStepperNext type="submit" class="btn btn-sm btn-info ">
                            {{ 'opportunities.vacancies.addVacancy.details.subjectCombinations.nextBtn' | translate }}
                        </button>
                    </div>
                </div>
              </form>
            </mat-step>
            <mat-step>
                <form #vForm3="ngForm">
                    <ng-template matStepLabel>{{ 'opportunities.vacancies.addVacancy.posting.headerText' | translate }}</ng-template>
                    <div class="row mt-10">
                        <div class="col-md-12">
                            <div class="form-group">
                                <label class="form-label">{{ 'opportunities.vacancies.addVacancy.posting.form.schoolInfo' | translate }}<span class="text-danger">*</span></label>
                                <input type="text" class="form-control" [placeholder]="'opportunities.vacancies.addVacancy.posting.form.schoolInfoPlaceholderText' | translate"
                                    name="vSchool" #vSchool="ngModel" [(ngModel)]="vacancy.school" required
                                    [ngClass]="{ 'b-1 && border-danger': vForm3.submitted && vSchool.invalid }" disabled>
                                <div *ngIf="vForm3.submitted && vSchool.errors?.required" class="form-control-feedback text-danger">
                                    <small>{{ 'opportunities.vacancies.addVacancy.posting.formErrors.schoolInfo' | translate }}.</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">{{ 'opportunities.vacancies.addVacancy.posting.form.county' | translate }}<span class="text-danger">*</span></label>
                                <ng-select [notFoundText]="'common.noItemsFound' | translate"
                                    [items]="counties"
                                    [placeholder]="'opportunities.vacancies.addVacancy.posting.form.countyPlaceholderText' | translate"
                                    class="form-control-dropdown"
                                    appendTo="body"
                                    [dropdownPosition]="'bottom'"
                                    [clearable]="false"
                                    name="form_selected"
                                    #county="ngModel"
                                    [(ngModel)]="vacancy.county"
                                    (change)="countyChanged()"
                                    bindLabel="name"
                                    required
                                    [ngClass]="{ 'b-1 && border-danger': vForm3.submitted && county.invalid }"
                                    disabled>
                                </ng-select>
                                <div *ngIf="vForm3.submitted && county.errors?.required" class="form-control-feedback text-danger">
                                    <small>{{ 'opportunities.vacancies.addVacancy.posting.formErrors.county' | translate }}.</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">{{ 'opportunities.vacancies.addVacancy.posting.form.subCounty' | translate }}</label>
                                <ng-select [notFoundText]="'common.noItemsFound' | translate"
                                    [items]="region.county.sub_counties"
                                    [placeholder]="'opportunities.vacancies.addVacancy.posting.form.subCountyPlaceholderText' | translate"
                                    class="form-control-dropdown"
                                    appendTo="body"
                                    [dropdownPosition]="'bottom'"
                                    [clearable]="false"
                                    name="subcounty_selected"
                                    [(ngModel)]="vacancy.subCounty"
                                    bindLabel="subCountyName">
                                </ng-select>
                            </div>
                        </div>
                    </div>
                    <div class="box-footer d-flex justify-content-between justify-content-lg-start">
                        <div>
                            <button matStepperPrevious type="submit" class="btn btn-sm btn-secondary me-lg-20">
                                {{ 'opportunities.vacancies.addVacancy.posting.form.backBtn' | translate }}
                            </button>
                        </div>
                        <div>
                            <button matStepperNext type="submit" class="btn btn-sm btn-info ">
                                {{ 'opportunities.vacancies.addVacancy.posting.form.nextBtn' | translate }}
                            </button>
                        </div>
                    </div>
                </form>
            </mat-step>
            <mat-step>
                <form #vForm4="ngForm">
                    <ng-template matStepLabel>{{ 'opportunities.vacancies.addVacancy.userDetails.headerText' | translate }}</ng-template>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label class="form-label">{{ 'opportunities.vacancies.addVacancy.userDetails.form.displayName' | translate }}:</label>
                                <input type="text" class="form-control" [placeholder]="'opportunities.vacancies.addVacancy.userDetails.form.displayNamePlaceholderText' | translate"
                                    name="displayName" #displayName="ngModel" [(ngModel)]="vacancy.displayName"
                                    [ngClass]="{ 'b-1 && border-danger': vForm4.submitted && displayName.invalid }" disabled>
                                    <small class="fst-italic">{{ 'opportunities.vacancies.addVacancy.userDetails.form.displayNameHelperText' | translate }}.</small>
                                <div *ngIf="vForm4.submitted && displayName.errors?.required" class="form-control-feedback text-danger">
                                    <small>{{ 'opportunities.vacancies.addVacancy.userDetails.formErrors.displayName' | translate }}.</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label class="form-label">{{ 'opportunities.vacancies.addVacancy.userDetails.form.phoneNumber' | translate }}:</label>
                                <input type="text" class="form-control" [placeholder]="'opportunities.vacancies.addVacancy.userDetails.form.phoneNumberHelperText' | translate"
                                    name="phoneNumber" #phoneNumber="ngModel" [(ngModel)]="vacancy.phoneNumber"
                                    [ngClass]="{ 'b-1 && border-danger': vForm4.submitted && phoneNumber.invalid }" disabled/>
                                <small class="fst-italic">{{ 'opportunities.vacancies.addVacancy.userDetails.form.phoneNumberHelperText' | translate }}.</small>
                                <div *ngIf="vForm4.submitted && phoneNumber.errors?.required" class="form-control-feedback text-danger">
                                    <small>{{ 'opportunities.vacancies.addVacancy.userDetails.formErrors.phoneNumber' | translate }}.</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group mt-30">
                                <input type="checkbox" id="showPhone" class="filled-in chk-col-info" name="showPhone" [(ngModel)]="vacancy.showPhone" />
                                <label for="showPhone">{{ 'opportunities.vacancies.addVacancy.userDetails.form.showPhoneNumber' | translate }}</label>
                                <br><small class="fst-italic">{{ 'opportunities.vacancies.addVacancy.userDetails.form.showPhoneNumberHelperText' | translate }}</small>
                            </div>
                        </div>
                    </div>
                    <div class="box-footer">
                        <button type="button" class="btn btn-sm btn-warning me-1 me-lg-20" (click)="stepper.reset()">
                          {{ 'opportunities.vacancies.addVacancy.userDetails.form.resetBtn' | translate }}
                        </button>
                        <button type="submit" class="btn btn-sm btn-info mx-2 pull-right" (click)="saveVacancies()">
                            <span>{{ 'opportunities.vacancies.addVacancy.userDetails.form.saveBtn' | translate }}</span>
                            <!-- <span *ngIf="showLoading">Processing</span>
                            <span *ngIf="showLoading" class="ms-1"><img src="../../../../assets/img/loading-bars.svg" alt="Processing. Please wait."></span> -->
                        </button>
                        <button matStepperPrevious type="button" class="btn btn-sm btn-secondary me-1 pull-right">
                          {{ 'opportunities.vacancies.addVacancy.userDetails.form.backBtn' | translate }}
                        </button>
                        <!-- <button type="submit" class="d-none d-lg-inline-block btn btn-sm btn-info">Send</button> -->
                    </div>
                </form>
            </mat-step>
        </mat-stepper>
    </div>
    <div *ngIf="addVacancy" class="row mt-20">
        <div class="col-12">
            <div class="pull-right mt-10">
                <button (click)="changeFilter('teaching'); isEdit = false; editUpload = false" class="btn btn-sm btn-dark waves-effect waves-light" type="button">
                    <i>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left-short" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"/>
                        </svg>
                    </i>
                    {{ 'opportunities.vacancies.addVacancy.userDetails.backToVacanciesBtn' | translate }}
                </button>
            </div>
        </div>
    </div>
</section>


<!-- Modal View Vacancy-->
<div class="modal fade none-border" id="view-vacancy">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title"><strong>{{ 'opportunities.vacancies.vacancy.details.headerText' | translate:{type: selected_type} }}</strong></h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="box-body">
          <form role="form">
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label class="fw-bold">{{ 'opportunities.vacancies.vacancy.details.title' | translate }}:</label>
                  <div>{{vacancy.title}}</div>
                </div>
              </div>
              <div *ngIf="teacher_option" class="col-md-6">
                <div class="form-group">
                  <label class="fw-bold">{{ 'opportunities.vacancies.vacancy.details.subjectCombinations' | translate }}</label>
                  <div>{{vacancy.subject1}}/{{vacancy.subject2}}</div>
                </div>
              </div>
              <div class="col-md-12">
                <div class="form-group">
                  <label class="fw-bold">{{ 'opportunities.vacancies.vacancy.details.description.headerText' | translate }}</label>
                  <div *ngIf="vacancy.contentType == 2">{{vacancy?.description}}</div>
                  <div *ngIf="vacancy.contentType == 1" class="mt-10">
                    <span>
                        <a (click)="downloadFile(vacancy.description, vacancy.title)" class="text-info" style="cursor: pointer;">
                            {{ 'opportunities.vacancies.vacancy.details.description.downloadText' | translate }}
                            <i>
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
                                    <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                                    <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                                </svg>
                            </i>
                        </a><span class="ms-2">{{ 'opportunities.vacancies.vacancy.details.description.remainingText' | translate }}</span>
                    </span>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label class="fw-bold">{{ 'opportunities.vacancies.vacancy.details.deadlineDate' | translate }}</label>
                  <div *ngIf="!isEdit">{{vacancy.applyByDate | date}}</div>
                </div>
              </div>
              <div class="col-md-12">
                <div class="form-group">
                  <label class="fw-bold">{{ 'opportunities.vacancies.vacancy.details.schoolInfo' | translate }}</label>
                  <div>{{vacancy.school}}</div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <div class="fw-bold">{{ 'opportunities.vacancies.vacancy.details.county' | translate }}</div>
                    <div>{{vacancy.county}}</div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <div class="fw-bold">{{ 'opportunities.vacancies.vacancy.details.subCounty' | translate }}</div>
                    <div>{{vacancy.subCounty}}</div>
                </div>
              </div>
              <div class="col-md-12">
                <div class="form-group">
                  <div class="fw-bold">{{ 'opportunities.vacancies.vacancy.details.contactDetails' | translate }}</div>
                    <div>{{vacancy.displayName}}</div>
                    <div *ngIf="vacancy.showPhone">{{vacancy.phoneNumber}}</div>
                </div>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer text-end">
          <button type="button" class="btn btn-sm btn-danger me-2" data-bs-dismiss="modal">
            {{ 'opportunities.vacancies.vacancy.details.closeBtn' | translate }}
          </button>
          <!-- <button type="button" class="btn btn-sm btn-info save-category" data-bs-dismiss="modal">Save</button> -->
        </div>
      </div>
    </div>
  </div>
  <!-- END MODAL -->


